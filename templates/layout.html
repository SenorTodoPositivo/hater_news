<!doctype html>
<html lang="en"
xmlns="http://www.w3.org/1999/xhtml"
xmlns:og="http://ogp.me/ns#"
xmlns:fb="https://www.facebook.com/2008/fbml">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hater News. | Haterz gon' hate, but now you know who the haterz are.</title>
    <meta name="author" content="Kevin McAlear" />
    <link rel="shortcut icon" href="{{ url_for('static', filename='icon.ico') }}">
    <meta property="og:image" content="http://haternews.herokuapp.com/static/mr-rogers-200x200.jpg"/>
    <meta property="og:url" content="http://haternews.herokuapp.com/"/>
    <meta property="og:title" content="Hater News. | Haterz gon' hate, but now you know who the haterz are." />
    <meta property="og:description" content="The internet is covered in trolls who are filled with hate. It's time we started to expose them using some machine learning." />
    <script src="//code.jquery.com/jquery-2.1.1.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='classie.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='snap.svg-min.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='svgLoader.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='sweet-alert.js') }}"></script>
    <link rel=stylesheet type=text/css href="{{ url_for('static', filename='style.css') }}">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

    <script type="text/javascript" src="//cdn.jsdelivr.net/qtip2/2.2.1/jquery.qtip.js"></script>
    <link href="//cdn.jsdelivr.net/qtip2/2.2.1/jquery.qtip.css" rel="stylesheet">
  </head>
  <body>
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=744530812307672&version=v2.0";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    <a class="hide-s" href="https://github.com/kevinmcalear/hater_news" target="_blank"><img class="hide-s" style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/a6677b08c955af8400f44c6298f40e7d19cc5b2d/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"></a>
    <div id="pagewrap" class="pagewrap">
      <div class="container show">
        <header class="header hn">
          <a class="twitter-share-button"
             href="https://twitter.com/intent/tweet?screen_name=HackerNews&button_hashtag=HaterNews"
             data-url="http://haternews.co"
             data-via="KevinMcAlear">
          Share
          </a>
          <script type="text/javascript">
          window.twttr=(function(d,s,id){var t,js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return}js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);return window.twttr||(t={_e:[],ready:function(f){t._e.push(f)}})}(document,"script","twitter-wjs"));
          </script>
          <div class="fb-share-button" data-href="http://haternews.co" data-width="60px" data-layout="button"></div>
          <a href="/"><h1 class="logo hn">Hater News<p style="padding-top:20px;text-shadow:none;font-size:13px;color:rgb(155, 155, 155);font-weight:100;">Haterz gon' hate. But now you know who the haterz are.</p></h1></a>
          <div style="margin:50px"></div>
        </header><!-- /header -->
        <section class="columns clearfix">
          <div class='page'>
              {% for message in get_flashed_messages() %}
              <div class='flash'>{{ message }}</div>
              {% endfor %}
              {% block body %}{% endblock %}
              <div class="columns" style="margin: 50px;">
                <div class="column" style="background:white;">
                  <h3>Why</h3>
                  <p style="color:grey;font-size: 15px;margin-top: 10%;">The internet is covered in trolls who are filled with hate. It's time we started to expose them and put them in their place. Look for Twitter, Facebook, Instagram, and Reddit versions and a Chrome Extention as well. Want to help out? Feel free to fork the project or contribute to the codebase. <a href="mailto:kevin.mcalear@gmail.com">Reach Out</a><br><br>Hater News is a project made by <a href="http://twitter.com/kevinmcalear" target="_blank">Kevin McAlear</a>.</p>
                </div>
                <div class="column" style="background:white;">
                  <h3>How</h3>
                  <p style="color:grey;font-size: 15px;margin-top: 10%;">You give the program a username from <a id="the-network" href="https://news.ycombinator.com/" target="_blank">Hacker News</a>. It finds the 50 <span id="time-frame">most recent</span> comments that the user has made and runs the probability of each comment being insulting using <a href="http://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html" target="_blank">SciKit Learn's Count Vectorizer</a>, some additional <a href="https://github.com/kevinmcalear/hater_news/blob/master/its_pkl_time.py" target="_blank">hand-rolled features</a>, and <a href="http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LogisticRegression.html" target="_blank">Logistic Regression</a>. If you want to learn more, feel free to check out the <a href="https://github.com/kevinmcalear/hater_news/blob/master/haterz_classification.ipynb" target="_blank">iPython Notbook</a> for a detailed explanation.</p>
                </div>
              </div>
          </div>
        </section>
      </div>
    <div class="container" id="page-2">
    </div><!-- /container -->

    <div id="loader" class="pageload-overlay hn" data-opening="M20,15 50,30 50,30 30,30 Z;M0,0 80,0 50,30 20,45 Z;M0,0 80,0 60,45 0,60 Z;M0,0 80,0 80,60 0,60 Z" data-closing="M0,0 80,0 60,45 0,60 Z;M0,0 80,0 50,30 20,45 Z;M20,15 50,30 50,30 30,30 Z;M30,30 50,30 50,30 30,30 Z">
    <div style="z-index:999;color:#BABABA;;position:relative;text-align:center;margin:30%;">
       <h1 id="load-message" class="hide">Trolling For Your Troll Level...</h1>
      </div>
    <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 80 60" preserveAspectRatio="none">
      <path d="M30,30 50,30 50,30 30,30 Z"/>
    </svg>
    <script>
      (function() {

        var pageWrap = document.getElementById( 'pagewrap' ),
          pages = [].slice.call( pageWrap.querySelectorAll( 'div.container' ) ),
          currentPage = 0,
          triggerLoading = [].slice.call( pageWrap.querySelectorAll( 'input.pageload-link' ) ),
          loader = new SVGLoader( document.getElementById( 'loader' ), { speedIn : 100 } );
          snarkyComments = [
            "Hopefully you're an internet saint.",
            "Man, you have a lot of comments...",
            "Ok, hopefully we are wrapping up.",
            "Still crunching numbers... I know this takes a while.",
            "Haterz gon' hate. But now you know who the haterz are.",
          ];
          reverse = false;
          network = 'hn'

          setTimeout( function() {
            $("input[name='reverse']").on('change', function(){
              reverse = $("input[name='reverse']:checked").length == 1;

              if ( reverse == true ){
                $('#time-frame').text("oldest");
              } else {
                $('#time-frame').text("most recent");
              };
            });
           }, 200 );

          setTimeout( function() {
            $("input:radio[name=social-network]").click(function() {
                network = $(this).val();
                if ( network == 'hn' ) {
                  $('h1.logo').fadeOut( "slow", function() {
                    // Animation complete.
                    $('h1.logo')
                      .text('Hater News')
                      .append('<p style="padding-top:20px;text-shadow:none;font-size:13px;color:rgb(155, 155, 155);font-weight:100;">Haterz gon\' hate. But now you know who the haterz are.</p>')
                      .fadeIn('slow');
                    $('body')
                      .css('color','rgba(255, 102, 0, 0.76)');
                    $('label[for=reverse_checkbox]')
                      .css('color','rgba(255, 102, 0, 0.76)');
                    $('.reddit')
                      .removeClass('reddit')
                      .addClass('hn');
                    $('#the-network').text("Hacker News");
                  });


                }
                if ( network == 'reddit' ) {
                  $('h1.logo').fadeOut( "slow", function() {
                    // Animation complete.
                    $('h1.logo')
                      .text('Reddit Haterz')
                      .append('<p style="padding-top:20px;text-shadow:none;font-size:13px;color:rgb(155, 155, 155);font-weight:100;">Haterz gon\' hate. But now you know who the haterz are.</p>')
                      .fadeIn('slow');
                    $('body')
                      .css('color','rgba(95, 153, 207, 0.68)');
                    $('label[for=reverse_checkbox]')
                      .css('color','rgba(95, 153, 207, 0.68)');
                    $('.hn')
                      .removeClass('hn')
                      .addClass('reddit');
                    $('#the-network').text("Reddit").attr('href','http://www.reddit.com/');
                  });
                }
            });
           }, 200 );



        function init() {
          triggerLoading.forEach( function( trigger ) {
            trigger.addEventListener( 'click', function( ev ) {
              ev.preventDefault();



              if ( $('input:text').val().trim() != "" ) {


                loader.show();


                 setTimeout( function() {
                   $( '#load-message' ).removeClass('hide');
                 }, 500 );
                page = $('div.page');
                setTimeout( function() { page.empty() }, 500 );
                // after some time hide loader
                setTimeout( function() {
                  message = document.getElementById( 'load-message' );
                  message.textContent = "Hopefully you're an internet saint."
                }, 6000 );

                setTimeout( function() {
                  message = document.getElementById( 'load-message' );
                  message.textContent = "Maybe you should stop hatin'."
                  if(!sent) {
                    $('#load-message').append('<br><iframe style="hide-s" width="300" height="200" src="//www.youtube.com/embed/8dxvoPhErPo?autoplay=1&controls=0&fs=0&disablekb=1&modestbranding=1&rel=0&amp;controls=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>');
                  }
                }, 12000 );

                setTimeout( function() {
                  message = document.getElementById( 'load-message' );
                  message.textContent = "I bet you're the digital Jersy Shore."
                }, 18200 );

                setTimeout( function() {
                  message = document.getElementById( 'load-message' );
                  message.textContent = "Or are you more of a Mr. Rogers type?"
                }, 24000 );

                setTimeout( function() {
                  message = document.getElementById( 'load-message' );
                  message.textContent = "Man, you have a lot of comments..."
                }, 30000 );

                setTimeout( function() {
                  message = document.getElementById( 'load-message' );
                  message.textContent = "Still crunching numbers... I know this takes a while."
                  if(!sent) {
                    $('#load-message').append('<br><iframe style="hide-s" width="300" height="200" src="//www.youtube.com/embed/BfpV2e9PAE4?t=0m40s&autoplay=1&controls=0&fs=0&disablekb=1&modestbranding=1&rel=0&amp;controls=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>');
                  }
                }, 36000 );

                setTimeout( function() {
                  message = document.getElementById( 'load-message' );
                  message.textContent = "Something broke... Try Again. Sorry! :("
                }, 120000 );

                setTimeout( function() {
                  loader.hide();
                  message.textContent = "Trolling For Your Troll Level..."
                  if(!sent) {
                    setTimeout( function() {
                      location.reload();
                    }, 600 );
                  }
                }, 123000 );

                sent = false;
                username = $( ":text" ).val().trim();

                // Error handling if a username doesn't exist
                $( document ).ajaxError(function() {
                  swal({
                    title: "Hmmm.",
                    text: "That's probably not a real username. FYI, they are case sensitive.",
                    type: "warning",
                    confirmButtonColor: "rgba(255, 102, 0, 0.76)",
                    confirmButtonText: "Try A New Username.",
                    closeOnConfirm: false },
                  function(){
                    location.reload();
                  });
                });

                $.post( "/hater-score", { username: username, reverse: reverse, network: network }, function( data ) {
                    sent = true;
                    message = document.getElementById( 'load-message' );
                    message.textContent = "Ok, hopefully we are wrapping up."

                  setTimeout( function() {

                    page.append(data);
                    loader.hide();
                    $( '#load-message' ).addClass('hide');
                    classie.removeClass( pages[ currentPage ], 'show' );
                    // update..
                    // currentPage = currentPage ? 0 : 1;
                    classie.addClass( pages[ currentPage ], 'show' );
                    // history.pushState(null, null, username+"-hater-score");
                  }, 1000 );
                });
              } else {
                swal({
                    title: "Sorry.",
                    text: "You have to put in a username from Hacker News.",
                    type: "error",
                    confirmButtonColor: "rgba(255, 102, 0, 0.76)",
                    confirmButtonText: "Alrighty!",
                });
              }
            } );
          } );
        }

        init();
      })();
    </script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-56059088-1', 'auto');
      ga('send', 'pageview');

    </script>
  </body>
</html>
